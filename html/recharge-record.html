<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>充值记录</title>
    <link rel="stylesheet" href="../css/weui-min.css" />
    <link rel="stylesheet" href="../css/example.css" />
    <link rel="stylesheet" type="text/css" href="../css/overlay.css">
</head>

<body>
    <div class="weui-cells" id="app" style="margin-top: 0">
        <div class="weui-flex" style="height: 40px;border-bottom: 1px #f2f2f2 solid;">
            <div class="weui-flex weui-flex__item" style="flex: 0 0 45%;">
                <div style="background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;justify-content: center">时间</div>
            </div>
            <div class="weui-flex weui-flex__item" style="flex: 0 0 30%;">
                <div style="background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;padding-left: 30px">技师</div>
            </div>
            <div class="weui-flex weui-flex__item" style="flex: 0 0 30%;">
                <div style="background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;justify-content: center">金额/元</div>
            </div>
        </div>
        <div class="weui-flex" style="height: 40px;border-bottom: 1px #f2f2f2 solid;" v-for="item in record">
            <div class="weui-flex weui-flex__item" style="flex: 0 0 45%;">
                <div style="font-size:15px;background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;justify-content: center;font-family: Helvetica Neue;"
                    v-text="item.generated_time"></div>
            </div>
            <div class="weui-flex weui-flex__item" style="flex: 0 0 30%;">
                <div style="font-family:Consolas;background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;color: #ff6666; padding-left: 30px"
                    v-text="item.job_number"></div>
            </div>
            <div class="weui-flex weui-flex__item" style="flex: 0 0 30%;">
                <div style="font-family:Consolas;background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;justify-content: center"
                    v-text="'￥'+item.charge"></div>
            </div>         
        </div>
        <div class="weui-tabbar" style="position: fixed;bottom: 0;">
            <a href="../html/index.html" class="weui-tabbar__item">
                <img src="../src/主页.png" data-original="../src/主页.png" alt="" class="weui-tabbar__icon">
                <p class="weui-tabbar__label">首页</p>
            </a>
            <a href="../html/order.html" class="weui-tabbar__item">
                <img src="../src/订单.png" data-original="../src/订单激活.png" alt="" class="weui-tabbar__icon">
                <p class="weui-tabbar__label">订单</p>
            </a>
            <a href="../html/customer.html" class="weui-tabbar__item weui-bar__item_on">
                <img src="../src/我的激活.png" data-original="../src/我的激活.png" alt="" class="weui-tabbar__icon">
                <p class="weui-tabbar__label">我的</p>
            </a>
        </div>
        <div id="modal-overlay" v-show="overlay">
            <div class="modal-data">
                <img src="../src/loading.gif" />
            </div>
        </div>
    </div>
</body>
<script type="text/javascript" src="../js/jweixin.js"></script>
<!-- <script type="text/javascript" src="../js/example.js"></script> -->
<script type="text/javascript" src="../js/weui-min.js"></script>

<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/vue.min.js"></script>

<script type="text/javascript">
    $(function () {
        $('.weui-tabbar__item').on('click', function () 
		{
            $(this).addClass('weui-bar__item_on').siblings('.weui-bar__item_on').removeClass(
                'weui-bar__item_on');
            $(this).children('.weui-tabbar__icon').attr("src", $(this).children('.weui-tabbar__icon').attr(
                'data-original'));
        });
    });

    function getQueryString(name) 
	{
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return null;
    }
	
    let app = new Vue({
        el: "#app",
        data: {
            overlay: true,
            record: [],
        },
        methods: {

        },
        created() {
            var that = this;
            $.post('../php/getcharge.php', {
                phone: getQueryString('phone'),
            }).done((res) => {
                res = JSON.parse(res);
                if (res.status == 1) 
				{
                    for (var i in res.data) 
					{
                        var info = res.data[i];
                        that.record.push(info);
                    }
                    that.overlay = false;
                } 
				else if (res.status == -1) 
				{
                    that.overlay = false;
                }
            })
        }
    })
</script>

</html>