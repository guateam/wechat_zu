<!DOCTYPE html>
<html lang="en">

<head id="">
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title></title>
    <link rel="stylesheet" href="../css/weui-min.css" />
    <link rel="stylesheet" href="../css/example.css" />
    <!-- <link href="https://cdn.bootcss.com/toastr.js/2.1.4/toastr.min.css" rel="stylesheet"> -->
    <link rel="stylesheet" href="../css/global.css" />
    <link rel="stylesheet" href="../css/iview.css" />
    <link rel="stylesheet" type="text/css" href="../css/overlay.css">
    <link rel="stylesheet" type="text/css" href="../css/iview.css">
    <style>

        * {
            margin: 0;
            padding: 0;
        }

        #box {
            width: 300px;
            height: 32px;
            line-height: 30px;
            overflow: hidden;
            padding-left: 30px;
            border: 1px solid black;
            transition: all 0.5s;
        }

        .anim {
            transition: all 0.5s;
        }

        #con1 li {
            list-style: none;
            line-height: 30px;
            height: 30px;
        }

        .marquee {
            margin: 0 auto;
            overflow: hidden;
            white-space: nowrap;
            box-sizing: border-box;
            animation: marquee 8s linear infinite;
            width: 60%;
            margin-left: 2.7em;
        }

        /*make it move*/
        @keyframes marquee {
            0% {
                text-indent: 15.5em;
            }
            100% {
                text-indent: -15em;
            }
        }

        /*make it pretty*/
        .microsoft {
            position: relative;
            font: 16px 'Segoe UI', Tahoma, Helvetica, SansSerif;
        }

        .ivu-carousel-list {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body style="line-height: 0;">
    <div class="weui-tab" id="app">
        <div class="weui-tab__panel" id='shop'>
            <row style="height: 30%;width: 100%;">
                <carousel autoplay v-model="value2" loop radius-dot arrow="always" style="height: 100%;width: 100%;">
                    <carousel-item v-for="item in top_pic">
                        <div class="demo-carousel"><img :src="item.url" @click="navi(item.dir)" alt="" style="height: 100%;width: 100%;"></div>
                    </carousel-item>
                </carousel>
            </row>
            <div style="height: 7%;width: 100%;background-color: white;border-bottom: 1px #f2f2f2 solid;display: flex;align-items: center;">
                <span style="margin-left: 10px;font-size: 1.3em;font-weight: 600" v-text='data.name'></span>
                <span style="margin-left: 20px" v-text="data.open_time+'～'+data.close_time"></span>
            </div>
            <div style="position: relative;height: 7%;width: 100%;background-color: white;border-bottom: 1px #f2f2f2 solid;display: flex;align-items: center;background-image: url(../src/定位.png);background-repeat:no-repeat;background-position: 1%;">
                <span @click="navi(data.location)" style="display:inline-block;width:260px;margin-left: 25px" v-text='data.position'></span>
                <span style="float:right;position: absolute;padding-left:15px;text-align: center;border-left: 1px #f2f2f2 solid;right: 15px;">
                    <a :href="'tel:'+data.phone">
                        <img src="../src/电话.png" alt="">
                    </a>
                </span>
            </div>
            <div class="weui-flex" style="justify-content: center;align-items: center;height: 105px;width: 100%;background-color: white;border-bottom: 1px #f2f2f2 solid;">
                <div class="" style="width: 100%; height: 100%;display: flex;align-items: center;justify-content: center;">
                    <div style="display: flex;flex: 0 0 20%;flex-wrap:  wrap;height: 100%;align-items:  center;justify-content:  center;">
                        <div onClick="navi('jishixuanze.html')" style="height: 60px;width: 60px;border-radius: 50%;background-color: #ffcc66;overflow: hidden;">
                            <img src="../src/技师预约.png" alt="" style="width: 100%;height: 100%;">
                        </div>
                        <div style="line-height: 1.6;font-size:  1.1em;font-weight: 400;margin-top: -8px;">技师预约</div>
                    </div>
                    <div style="display: flex;flex: 0 0 20%;flex-wrap:  wrap;height: 100%;align-items:  center;justify-content:  center;">
                        <div style="height: 60px;width: 60px;border-radius: 50%;background-color: #ffcc66;display: flex;justify-content: center;align-items: center;">
                            <a :href="'tel:'+data.phone">
                                <img src="../src/包厢预约.png" alt="" style="width: 34px;height: 34px;">
                            </a>
                        </div>
                        <div style="line-height: 1.6;font-size:  1.1em;font-weight: 400;margin-top: -8px;">包厢预约</div>
                    </div>


                    <div style="display: flex;flex: 0 0 20%;flex-wrap:  wrap;height: 100%;align-items:  center;justify-content:  center;">
                        <div style="height: 60px;width: 60px;border-radius: 50%;background-color: #ff9966;display: flex;justify-content: center;align-items: center;"
                            onClick="navi('qiyewenhua.html')">
                            <img src="../src/企业文化.png" alt="" style="width: 34px;height: 34px;">
                        </div>
                        <div style="line-height: 1.6;font-size:  1.1em;font-weight: 400;margin-top: -8px;">企业文化</div>
                    </div>


                    <div style="display: flex;flex: 0 0 20%;flex-wrap:  wrap;height: 100%;align-items:  center;justify-content:  center;">
                        <div onClick="navi('recharge.html')" style="height: 60px;width: 60px;border-radius: 50%;background-color: #66ccff;display: flex;justify-content: center;align-items: center;">
                            <img src="../src/会员充值.png" alt="" style="width: 34px;height: 34px;"></div>
                        <div style="line-height: 1.6;font-size:  1.1em;font-weight: 400;margin-top: -8px;">会员充值</div>
                    </div>



                    <div style="display: flex;flex: 0 0 20%;flex-wrap:  wrap;height: 100%;align-items:  center;justify-content:  center;">
                        <div onClick="navi('dashangjishi.html')" style="height: 60px;width: 60px;border-radius: 50%;background-color: #ff6666;display: flex;justify-content: center;align-items: center;">
                            <img src="../src/打赏技师.png" alt="" style="width: 34px;height: 34px;"></div>
                        <div style="line-height: 1.6;font-size:  1.1em;font-weight: 400;margin-top: -8px;">打赏技师</div>
                    </div>
                </div>
            </div>

            <!--<div style="width: 100%;height: 7%;background-color: white;background-image: url(../src/喇叭.png);background-repeat: no-repeat;background-position: 2%;display: flex;align-items: center;">-->
            <!--<p class="microsoft marquee" id='notice' >-->
            <!--<a v-for='item in items3'>{{item.text}} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>-->
            <!--</p>-->
            <!--</div>-->
            <div id="box" style="border: none;width: 100%;background-color: white;background-image: url(../src/喇叭.png);background-repeat: no-repeat;background-position: 2%;border-bottom: 1px solid #f2f2f2;margin-bottom: 1px;">
                <ul id="con1" ref="con1" :class="{anim:animate==true}">
                    <li v-for='item in items3'>{{item.text}}</li>
                </ul>
            </div>
            <div class="" style="background-color: white;">
                <div class="weui-navbar" style="height: 7%;background-color: white;position: relative">
                    <div class="weui-navbar__item weui-bar__item_on two" style="display: flex;justify-content: center;line-height: 1.3">
                        <span style="font-size: 1.2em;font-weight: 500">项目分类</span>
                    </div>
                    <div class="weui-navbar__item one" style="display: flex;justify-content: center;line-height: 1.3">
                        <span style="font-size: 1.2em;font-weight: 500">优惠活动</span>
                    </div>
                </div>
                <div class="weui-tab__panel" style="padding-top: 0;">
                    <div class="weui-tab__panel-item-one" style="display: none;font-weight: 500" id='app1'>
                        <div class="weui-flex" style="height: 40px;border-bottom: 1px #f2f2f2 solid;">
                            <div class="weui-flex weui-flex__item" style="flex: 0 0 32%;">
                                <div style="background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;margin-left: 30px">
                                    项目名称
                                </div>
                            </div>
                            <div class="weui-flex weui-flex__item" style="flex: 0 0 30%;">
                                <div style="background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;justify-content: center">
                                    原价/元
                                </div>
                            </div>
                            <div class="weui-flex weui-flex__item" style="flex: 0 0 30%;">
                                <div style="background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;justify-content: center">
                                    现价/元
                                </div>
                            </div>
                        </div>
                        <div class="weui-flex" style="height: 40px;border-bottom: 1px #f2f2f2 solid;" v-for="item in items1">
                            <div class="weui-flex weui-flex__item" style="flex: 0 0 32%;">
                                <div style="background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;margin-left: 30px"
                                    v-text='item.name'></div>
                            </div>
                            <div class="weui-flex weui-flex__item" style="flex: 0 0 30%;">
                                <div style="background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;justify-content: center"
                                    v-text="'￥'+item.price"></div>
                            </div>
                            <div class="weui-flex weui-flex__item" style="flex: 0 0 30%;">
                                <div style="background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;justify-content: center;color: #ff6666;"
                                    v-text="'￥'+item.discount"></div>
                            </div>
                        </div>
                    </div>
                    <div class="weui-tab__panel-item-two" id='app2' style="font-weight: 500">
                        <div class="weui-flex" style="height: 40px;border-bottom: 1px #f2f2f2 solid;">
                            <div class="weui-flex weui-flex__item" style="flex: 0 0 32%;">
                                <div style="background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;margin-left: 30px">
                                    项目名称
                                </div>
                            </div>
                            <div class="weui-flex weui-flex__item" style="flex: 0 0 30%;">
                                <div style="background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;justify-content: center">
                                    时长/分
                                </div>
                            </div>
                            <div class="weui-flex weui-flex__item" style="flex: 0 0 30%;">
                                <div style="background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;justify-content: center">
                                    门市价/元
                                </div>
                            </div>
                        </div>
                        <div class="weui-flex" style="height: 40px;border-bottom: 1px #f2f2f2 solid;" v-for="item in items2">
                            <div class="weui-flex weui-flex__item" style="flex: 0 0 32%;">
                                <div style="background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;margin-left: 30px"
                                    v-text='item.name'></div>
                            </div>
                            <div class="weui-flex weui-flex__item" style="flex: 0 0 30%;">
                                <div style="background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;justify-content: center"
                                    v-text='item.time'></div>
                            </div>
                            <div class="weui-flex weui-flex__item" style="flex: 0 0 30%;">
                                <div style="background-color: white;width: 100%;line-height: 1.6;display: flex;align-items: center;justify-content: center;color: #1aad19"
                                    v-text="'￥'+item.price"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="weui-panel weui-panel_access" style="background-color: white;border-radius: 5px;line-height: 1.6;margin-top: 0">
                <div class="weui-panel__hd">精品服务推荐</div>
                <div class="display-block" style="border-bottom: 1px solid #f2f2f2;">

                    <a v-for="item in items2" href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg "
                        @Click="navi('xiangmuxiangqing.html?id='+item['id'])">
                        <div class="weui-media-box__hd" style="background-color: #ffcc99;height: 50px;width: 50px; justify-content: center;align-items: center; display: flex;">
                            <img :src="item.img" alt="" style="width: 100%;height: 100%;">
                        </div>
                        <div class="weui-media-box__bd">
                            <h4 class="weui-media-box__title" style="font-size: 14px;" v-text="item.name"></h4>
                            <p class="weui-media-box__desc"></p>
                        </div>
                        <div class="weui-media-box__bd" style="float: right;text-align: right">
                            <h4 class="weui-media-box__title" style="color: #cc99cc;" v-text="'￥'+item.price"></h4>
                            <p class="weui-media-box__desc" v-text="item.time+'分钟'"></p>
                        </div>
                    </a>

                </div>
            </div>
        </div>
        <div style="height: 60px;width:60px;position: fixed;background-color: white;bottom: 70px;right: 70px; display: flex;align-items: center;justify-content: center;border-radius: 50%;border: 1px #fe736c solid;"
            onclick="myshare()">
            <div style="width: 100%;height: 100%;text-align: center;padding-top: 8px">
                <img src="../src/分享.png" alt="" style="height: 25px;width:25px">
                <h1 style="font-size: 14px;font-weight: 200;color: #fe736c;margin-top: 10px">分享</h1>
            </div>
        </div>
    </div>
    <div class="weui-tabbar ">
        <a href="../html/index.html " class="weui-tabbar__item weui-bar__item_on ">
            <img src="../src/主页激活.png " data-original="../src/主页激活.png " alt=" " class="weui-tabbar__icon ">
            <p class="weui-tabbar__label ">首页</p>
        </a>
        <a href="../html/order.html " class="weui-tabbar__item ">
            <img src="../src/订单.png " data-original="../src/订单激活.png " alt=" " class="weui-tabbar__icon ">
            <p class="weui-tabbar__label ">订单</p>
        </a>
        <a href="../html/customer.html " class="weui-tabbar__item ">
            <img src="../src/我的.png " data-original="../src/我的激活.png " alt=" " class="weui-tabbar__icon ">
            <p class="weui-tabbar__label ">我的</p>
        </a>
    </div>
</body>
<script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>
<!-- <script type="text/javascript" src="../js/example.js "></script> -->
<script type="text/javascript" src="../js/weui-min.js "></script>
<script type="text/javascript" src="../js/jquery.js "></script>
<script type="text/javascript" src="../js/windowOpen.js"></script>
<script type="text/javascript" src="../js/vue.js "></script>
<script type="text/javascript" src="../js/iview.js"></script>
<script type="text/javascript ">
    function myshare() {
        wx.miniProgram.navigateTo({
            url: '/pages/index/index'
        });
    }
</script>
<script type="text/javascript ">
    function call() {
        soshm.popIn({
            title: '技师分享',
            sites: ['weixin', 'weixintimeline', 'weibo', 'qzone', 'qq'],
            url: location.href,
            digest: ''
        });
    };
    $(function () {
        $('.weui-tabbar__item').on('click', function () {
            $(this).addClass('weui-bar__item_on').siblings('.weui-bar__item_on').removeClass(
                'weui-bar__item_on');
            $(this).children('.weui-tabbar__icon').attr("src ", $(this).children('.weui-tabbar__icon').attr(
                'data-original'));
        });
    });
    $(function () {
        $('.weui-navbar__item').on('click', function () {
            $(this).addClass('weui-bar__item_on').siblings('.weui-bar__item_on').removeClass(
                'weui-bar__item_on');
        });
        $('.one').on('click', function () {
            $('.weui-tab__panel-item-one').css('display', 'block');
            $('.weui-tab__panel-item-two').css('display', 'none');
        });
        $('.two').on('click', function () {
            $('.weui-tab__panel-item-two').css('display', 'block');
            $('.weui-tab__panel-item-one').css('display', 'none');
        });
    });

    let app = new Vue({
        el: '#app',
        data: {
            top_pic: [],
            items1: {},
            items2: {},
            data: {},
            value2: 0,
            animate: false,
            items3: []
        },
        methods: {
            scroll() {
                let con1 = this.$refs.con1;
                con1.style.marginTop = '-30px';
                this.animate = !this.animate;
                var that = this; // 在异步函数中会出现this的偏移问题，此处一定要先保存好this的指向
                setTimeout(function () {
                    that.items3.push(that.items3[0]);
                    that.items3.shift();
                    con1.style.marginTop = '0px';
                    that.animate = !that.animate; // 这个地方如果不把animate 取反会出现消息回滚的现象，此时把ul 元素的过渡属性取消掉就可以完美实现无缝滚动的效果了
                }, 2000)
            },
            phone() {
                var that = this;
                $(this).openWindow("店内热线", that.data.phone, ['好的']);
            },
            sorry() {
                var that = this;
                $(this).openWindow("抱歉", "本功能暂未上线，敬请期待", ['好的']);
            },
            navi(url) {
                window.location.href = url;
            }
        },
        created() {
            setInterval(this.scroll, 2000) // 在钩子函数中调用我在method 里面写的scroll()方法，注意此处不要忘记加this,我在这个位置掉了好几次坑，都是因为忘记写this。

            var id = ''
            var back = {};

            $.ajax({
                type: 'POST',
                async: false,
                data: {
                    id: id
                },
                dataType: 'json',
                url: '../php/getmainpage.php',
            }).done((data) => {
                if (data.status == 1) {
                    this.top_pic = data.top_pic;
                    back = data.data
                    console.log(back)
                    document.getElementsByTagName("title")[0].innerText = back.shop
                        .data.name
                }
            })
            if (back.app1.status == 1) {
                this.items1 = back.app1.data
            }
            if (back.app2.status == 1) {
                this.items2 = back.app2.data
            }
            if (back.notice.status == 1) {
                this.items3 = back.notice.data
            }
            if (back.shop.status == 1) {
                this.data = back.shop.data
            }
        }
    })

    function navi(url) {
        window.location.href = url;
    }

    $("#app1").css({
        "height": $("#app2").height()
    });
</script>

</html>